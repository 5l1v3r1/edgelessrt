include ../mak/defs.mak

ARCHIVE = $(LIBDIR)/enclave/liboelibc.a

CC = gcc

CFLAGS += -Wall
CFLAGS += -Werror
CFLAGS += -g
CFLAGS += -O2
CFLAGS += -m64
CFLAGS += -nostdinc
CFLAGS += -Wno-attributes
CFLAGS += -fPIC
CFLAGS += -fno-stack-protector
CFLAGS += -fvisibility=hidden
#CFLAGS += -Wmissing-prototypes
#CFLAGS += -Wstrict-prototypes
CFLAGS += -fno-builtin-memcpy
CFLAGS += -fno-builtin-memset
CFLAGS += -Wno-parentheses
CFLAGS += -Wno-pointer-sign
CFLAGS += -Wno-unused-but-set-variable
CFLAGS += -Wno-unknown-pragmas
CFLAGS += -Wno-maybe-uninitialized
CFLAGS += -Wno-format
CFLAGS += -Wno-missing-braces

CFLAGS += -std=c99
CFLAGS += -ffreestanding
CFLAGS += -fexcess-precision=standard
CFLAGS += -frounding-math
CFLAGS += -D_XOPEN_SOURCE=700

MUSLSRC = $(TOP)/3rdparty/musl/musl/src

INCLUDES += -I$(TOP)/include
INCLUDES += -I$(TOP)/include/openenclave/libc
INCLUDES += -I$(CURDIR)/internal
INCLUDES += -I$(MUSLSRC)/internal

DEFINES += -D__ELIBC_STUBS

SOURCES += $(wildcard *.c)
SOURCES += $(MUSLSRC)/string/bcmp.c
SOURCES += $(MUSLSRC)/string/bcopy.c
SOURCES += $(MUSLSRC)/string/bzero.c
SOURCES += $(MUSLSRC)/string/index.c
SOURCES += $(MUSLSRC)/string/memccpy.c
SOURCES += $(MUSLSRC)/string/memchr.c
SOURCES += $(MUSLSRC)/string/memcmp.c
SOURCES += $(MUSLSRC)/string/memcpy.c
SOURCES += $(MUSLSRC)/string/memmem.c
SOURCES += $(MUSLSRC)/string/memmove.c
SOURCES += $(MUSLSRC)/string/mempcpy.c
SOURCES += $(MUSLSRC)/string/memrchr.c
SOURCES += $(MUSLSRC)/string/memset.c
SOURCES += $(MUSLSRC)/string/rindex.c
SOURCES += $(MUSLSRC)/string/stpcpy.c
SOURCES += $(MUSLSRC)/string/stpncpy.c
SOURCES += $(MUSLSRC)/string/strcasecmp.c
SOURCES += $(MUSLSRC)/string/strcasestr.c
SOURCES += $(MUSLSRC)/string/strcat.c
SOURCES += $(MUSLSRC)/string/strchr.c
SOURCES += $(MUSLSRC)/string/strchrnul.c
SOURCES += $(MUSLSRC)/string/strcmp.c
SOURCES += $(MUSLSRC)/string/strcpy.c
SOURCES += $(MUSLSRC)/string/strcspn.c
SOURCES += $(MUSLSRC)/string/strdup.c
SOURCES += $(MUSLSRC)/string/strerror_r.c
SOURCES += $(MUSLSRC)/string/strlcat.c
SOURCES += $(MUSLSRC)/string/strlcpy.c
SOURCES += $(MUSLSRC)/string/strlen.c
SOURCES += $(MUSLSRC)/string/strncasecmp.c
SOURCES += $(MUSLSRC)/string/strncat.c
SOURCES += $(MUSLSRC)/string/strncmp.c
SOURCES += $(MUSLSRC)/string/strncpy.c
SOURCES += $(MUSLSRC)/string/strndup.c
SOURCES += $(MUSLSRC)/string/strnlen.c
SOURCES += $(MUSLSRC)/string/strpbrk.c
SOURCES += $(MUSLSRC)/string/strrchr.c
SOURCES += $(MUSLSRC)/string/strsep.c
#SOURCES += $(MUSLSRC)/string/strsignal.c
SOURCES += $(MUSLSRC)/string/strspn.c
SOURCES += $(MUSLSRC)/string/strstr.c
SOURCES += $(MUSLSRC)/string/strtok.c
SOURCES += $(MUSLSRC)/string/strtok_r.c
SOURCES += $(MUSLSRC)/string/strverscmp.c
SOURCES += $(MUSLSRC)/string/swab.c
SOURCES += $(MUSLSRC)/string/wcpcpy.c
SOURCES += $(MUSLSRC)/string/wcpncpy.c
SOURCES += $(MUSLSRC)/string/wcscasecmp.c
SOURCES += $(MUSLSRC)/string/wcscasecmp_l.c
SOURCES += $(MUSLSRC)/string/wcscat.c
SOURCES += $(MUSLSRC)/string/wcschr.c
SOURCES += $(MUSLSRC)/string/wcscmp.c
SOURCES += $(MUSLSRC)/string/wcscpy.c
SOURCES += $(MUSLSRC)/string/wcscspn.c
SOURCES += $(MUSLSRC)/string/wcsdup.c
SOURCES += $(MUSLSRC)/string/wcslen.c
SOURCES += $(MUSLSRC)/string/wcsncasecmp.c
SOURCES += $(MUSLSRC)/string/wcsncasecmp_l.c
SOURCES += $(MUSLSRC)/string/wcsncat.c
SOURCES += $(MUSLSRC)/string/wcsncmp.c
SOURCES += $(MUSLSRC)/string/wcsncpy.c
SOURCES += $(MUSLSRC)/string/wcsnlen.c
SOURCES += $(MUSLSRC)/string/wcspbrk.c
SOURCES += $(MUSLSRC)/string/wcsrchr.c
SOURCES += $(MUSLSRC)/string/wcsspn.c
SOURCES += $(MUSLSRC)/string/wcsstr.c
SOURCES += $(MUSLSRC)/string/wcstok.c
SOURCES += $(MUSLSRC)/string/wcswcs.c
SOURCES += $(MUSLSRC)/string/wmemchr.c
SOURCES += $(MUSLSRC)/string/wmemcmp.c
SOURCES += $(MUSLSRC)/string/wmemcpy.c
SOURCES += $(MUSLSRC)/string/wmemmove.c
SOURCES += $(MUSLSRC)/string/wmemset.c

SOURCES += $(MUSLSRC)/ctype/isalnum.c
SOURCES += $(MUSLSRC)/ctype/isalpha.c
SOURCES += $(MUSLSRC)/ctype/isascii.c
SOURCES += $(MUSLSRC)/ctype/isblank.c
SOURCES += $(MUSLSRC)/ctype/iscntrl.c
SOURCES += $(MUSLSRC)/ctype/isdigit.c
SOURCES += $(MUSLSRC)/ctype/isgraph.c
SOURCES += $(MUSLSRC)/ctype/islower.c
SOURCES += $(MUSLSRC)/ctype/isprint.c
SOURCES += $(MUSLSRC)/ctype/ispunct.c
SOURCES += $(MUSLSRC)/ctype/isspace.c
SOURCES += $(MUSLSRC)/ctype/isupper.c
SOURCES += $(MUSLSRC)/ctype/iswalnum.c
SOURCES += $(MUSLSRC)/ctype/iswalpha.c
SOURCES += $(MUSLSRC)/ctype/iswblank.c
SOURCES += $(MUSLSRC)/ctype/iswcntrl.c
SOURCES += $(MUSLSRC)/ctype/iswctype.c
SOURCES += $(MUSLSRC)/ctype/iswdigit.c
SOURCES += $(MUSLSRC)/ctype/iswgraph.c
SOURCES += $(MUSLSRC)/ctype/iswlower.c
SOURCES += $(MUSLSRC)/ctype/iswprint.c
SOURCES += $(MUSLSRC)/ctype/iswpunct.c
SOURCES += $(MUSLSRC)/ctype/iswspace.c
SOURCES += $(MUSLSRC)/ctype/iswupper.c
SOURCES += $(MUSLSRC)/ctype/iswxdigit.c
SOURCES += $(MUSLSRC)/ctype/isxdigit.c
SOURCES += $(MUSLSRC)/ctype/toascii.c
SOURCES += $(MUSLSRC)/ctype/tolower.c
SOURCES += $(MUSLSRC)/ctype/toupper.c
SOURCES += $(MUSLSRC)/ctype/towctrans.c
SOURCES += $(MUSLSRC)/ctype/wcswidth.c
SOURCES += $(MUSLSRC)/ctype/wctrans.c
SOURCES += $(MUSLSRC)/ctype/wcwidth.c
SOURCES += $(MUSLSRC)/ctype/__ctype_b_loc.c
SOURCES += $(MUSLSRC)/ctype/__ctype_get_mb_cur_max.c
SOURCES += $(MUSLSRC)/ctype/__ctype_tolower_loc.c
SOURCES += $(MUSLSRC)/ctype/__ctype_toupper_loc.c

SOURCES += $(MUSLSRC)/multibyte/btowc.c
SOURCES += $(MUSLSRC)/multibyte/c16rtomb.c
SOURCES += $(MUSLSRC)/multibyte/c32rtomb.c
SOURCES += $(MUSLSRC)/multibyte/internal.c
SOURCES += $(MUSLSRC)/multibyte/mblen.c
SOURCES += $(MUSLSRC)/multibyte/mbrlen.c
SOURCES += $(MUSLSRC)/multibyte/mbrtoc16.c
SOURCES += $(MUSLSRC)/multibyte/mbrtoc32.c
SOURCES += $(MUSLSRC)/multibyte/mbrtowc.c
SOURCES += $(MUSLSRC)/multibyte/mbsinit.c
SOURCES += $(MUSLSRC)/multibyte/mbsnrtowcs.c
SOURCES += $(MUSLSRC)/multibyte/mbsrtowcs.c
SOURCES += $(MUSLSRC)/multibyte/mbstowcs.c
SOURCES += $(MUSLSRC)/multibyte/mbtowc.c
SOURCES += $(MUSLSRC)/multibyte/wcrtomb.c
SOURCES += $(MUSLSRC)/multibyte/wcsnrtombs.c
SOURCES += $(MUSLSRC)/multibyte/wcsrtombs.c
SOURCES += $(MUSLSRC)/multibyte/wcstombs.c
SOURCES += $(MUSLSRC)/multibyte/wctob.c
SOURCES += $(MUSLSRC)/multibyte/wctomb.c

SOURCES += $(MUSLSRC)/stdio/__string_read.c
SOURCES += $(MUSLSRC)/stdio/__uflow.c
SOURCES += $(MUSLSRC)/stdio/snprintf.c
SOURCES += $(MUSLSRC)/stdio/vasprintf.c
SOURCES += $(MUSLSRC)/stdio/sscanf.c
SOURCES += $(MUSLSRC)/stdio/swprintf.c
SOURCES += $(MUSLSRC)/stdio/asprintf.c
SOURCES += $(MUSLSRC)/stdio/vfprintf.c
SOURCES += $(MUSLSRC)/stdio/vfscanf.c
SOURCES += $(MUSLSRC)/stdio/vfwprintf.c
SOURCES += $(MUSLSRC)/stdio/vsnprintf.c
SOURCES += $(MUSLSRC)/stdio/vsscanf.c
SOURCES += $(MUSLSRC)/stdio/vswprintf.c
SOURCES += $(MUSLSRC)/stdio/__toread.c
SOURCES += $(MUSLSRC)/stdio/fputwc.c
SOURCES += $(MUSLSRC)/stdio/sprintf.c
SOURCES += $(MUSLSRC)/stdio/vsprintf.c

SOURCES += $(MUSLSRC)/stdlib/qsort.c
SOURCES += $(MUSLSRC)/stdlib/bsearch.c
SOURCES += $(MUSLSRC)/stdlib/strtol.c
SOURCES += $(MUSLSRC)/stdlib/wcstol.c
SOURCES += $(MUSLSRC)/stdlib/wcstod.c
SOURCES += $(MUSLSRC)/stdlib/atoi.c
SOURCES += $(MUSLSRC)/stdlib/atol.c
SOURCES += $(MUSLSRC)/stdlib/atoll.c
SOURCES += $(MUSLSRC)/stdlib/atof.c
SOURCES += $(MUSLSRC)/stdlib/strtod.c
SOURCES += $(MUSLSRC)/stdlib/abs.c
SOURCES += $(MUSLSRC)/stdlib/labs.c
SOURCES += $(MUSLSRC)/stdlib/llabs.c

SOURCES += $(MUSLSRC)/math/acos.c
SOURCES += $(MUSLSRC)/math/acosf.c
SOURCES += $(MUSLSRC)/math/acosh.c
SOURCES += $(MUSLSRC)/math/acoshf.c
SOURCES += $(MUSLSRC)/math/acoshl.c
SOURCES += $(MUSLSRC)/math/acosl.c
SOURCES += $(MUSLSRC)/math/asin.c
SOURCES += $(MUSLSRC)/math/asinf.c
SOURCES += $(MUSLSRC)/math/asinh.c
SOURCES += $(MUSLSRC)/math/asinhf.c
SOURCES += $(MUSLSRC)/math/asinhl.c
SOURCES += $(MUSLSRC)/math/asinl.c
SOURCES += $(MUSLSRC)/math/atan2.c
SOURCES += $(MUSLSRC)/math/atan2f.c
SOURCES += $(MUSLSRC)/math/atan2l.c
SOURCES += $(MUSLSRC)/math/atan.c
SOURCES += $(MUSLSRC)/math/atanf.c
SOURCES += $(MUSLSRC)/math/atanh.c
SOURCES += $(MUSLSRC)/math/atanhf.c
SOURCES += $(MUSLSRC)/math/atanhl.c
SOURCES += $(MUSLSRC)/math/atanl.c
SOURCES += $(MUSLSRC)/math/cbrt.c
SOURCES += $(MUSLSRC)/math/cbrtf.c
SOURCES += $(MUSLSRC)/math/cbrtl.c
SOURCES += $(MUSLSRC)/math/ceil.c
SOURCES += $(MUSLSRC)/math/ceilf.c
SOURCES += $(MUSLSRC)/math/ceill.c
SOURCES += $(MUSLSRC)/math/copysign.c
SOURCES += $(MUSLSRC)/math/copysignf.c
SOURCES += $(MUSLSRC)/math/copysignl.c
SOURCES += $(MUSLSRC)/math/__cos.c
SOURCES += $(MUSLSRC)/math/cos.c
SOURCES += $(MUSLSRC)/math/__cosdf.c
SOURCES += $(MUSLSRC)/math/cosf.c
SOURCES += $(MUSLSRC)/math/cosh.c
SOURCES += $(MUSLSRC)/math/coshf.c
SOURCES += $(MUSLSRC)/math/coshl.c
SOURCES += $(MUSLSRC)/math/__cosl.c
SOURCES += $(MUSLSRC)/math/cosl.c
SOURCES += $(MUSLSRC)/math/erf.c
SOURCES += $(MUSLSRC)/math/erff.c
SOURCES += $(MUSLSRC)/math/erfl.c
SOURCES += $(MUSLSRC)/math/exp10.c
SOURCES += $(MUSLSRC)/math/exp10f.c
SOURCES += $(MUSLSRC)/math/exp10l.c
SOURCES += $(MUSLSRC)/math/exp2.c
SOURCES += $(MUSLSRC)/math/exp2f.c
SOURCES += $(MUSLSRC)/math/exp2l.c
SOURCES += $(MUSLSRC)/math/exp.c
SOURCES += $(MUSLSRC)/math/expf.c
SOURCES += $(MUSLSRC)/math/expl.c
SOURCES += $(MUSLSRC)/math/expm1.c
SOURCES += $(MUSLSRC)/math/expm1f.c
SOURCES += $(MUSLSRC)/math/expm1l.c
SOURCES += $(MUSLSRC)/math/__expo2.c
SOURCES += $(MUSLSRC)/math/__expo2f.c
SOURCES += $(MUSLSRC)/math/fabs.c
SOURCES += $(MUSLSRC)/math/fabsf.c
SOURCES += $(MUSLSRC)/math/fabsl.c
SOURCES += $(MUSLSRC)/math/fdim.c
SOURCES += $(MUSLSRC)/math/fdimf.c
SOURCES += $(MUSLSRC)/math/fdiml.c
SOURCES += $(MUSLSRC)/math/finite.c
SOURCES += $(MUSLSRC)/math/finitef.c
SOURCES += $(MUSLSRC)/math/floor.c
SOURCES += $(MUSLSRC)/math/floorf.c
SOURCES += $(MUSLSRC)/math/floorl.c
SOURCES += $(MUSLSRC)/math/fma.c
SOURCES += $(MUSLSRC)/math/fmaf.c
SOURCES += $(MUSLSRC)/math/fmal.c
SOURCES += $(MUSLSRC)/math/fmax.c
SOURCES += $(MUSLSRC)/math/fmaxf.c
SOURCES += $(MUSLSRC)/math/fmaxl.c
SOURCES += $(MUSLSRC)/math/fmin.c
SOURCES += $(MUSLSRC)/math/fminf.c
SOURCES += $(MUSLSRC)/math/fminl.c
SOURCES += $(MUSLSRC)/math/fmod.c
SOURCES += $(MUSLSRC)/math/fmodf.c
SOURCES += $(MUSLSRC)/math/fmodl.c
SOURCES += $(MUSLSRC)/math/__fpclassify.c
SOURCES += $(MUSLSRC)/math/__fpclassifyf.c
SOURCES += $(MUSLSRC)/math/__fpclassifyl.c
SOURCES += $(MUSLSRC)/math/frexp.c
SOURCES += $(MUSLSRC)/math/frexpf.c
SOURCES += $(MUSLSRC)/math/frexpl.c
SOURCES += $(MUSLSRC)/math/hypot.c
SOURCES += $(MUSLSRC)/math/hypotf.c
SOURCES += $(MUSLSRC)/math/hypotl.c
SOURCES += $(MUSLSRC)/math/ilogb.c
SOURCES += $(MUSLSRC)/math/ilogbf.c
SOURCES += $(MUSLSRC)/math/ilogbl.c
SOURCES += $(MUSLSRC)/math/__invtrigl.c
SOURCES += $(MUSLSRC)/math/j0.c
SOURCES += $(MUSLSRC)/math/j0f.c
SOURCES += $(MUSLSRC)/math/j1.c
SOURCES += $(MUSLSRC)/math/j1f.c
SOURCES += $(MUSLSRC)/math/jn.c
SOURCES += $(MUSLSRC)/math/jnf.c
SOURCES += $(MUSLSRC)/math/ldexp.c
SOURCES += $(MUSLSRC)/math/ldexpf.c
SOURCES += $(MUSLSRC)/math/ldexpl.c
SOURCES += $(MUSLSRC)/math/lgamma.c
SOURCES += $(MUSLSRC)/math/lgammaf.c
SOURCES += $(MUSLSRC)/math/lgammaf_r.c
SOURCES += $(MUSLSRC)/math/lgammal.c
SOURCES += $(MUSLSRC)/math/lgamma_r.c
SOURCES += $(MUSLSRC)/math/llrint.c
SOURCES += $(MUSLSRC)/math/llrintf.c
SOURCES += $(MUSLSRC)/math/llrintl.c
SOURCES += $(MUSLSRC)/math/llround.c
SOURCES += $(MUSLSRC)/math/llroundf.c
SOURCES += $(MUSLSRC)/math/llroundl.c
SOURCES += $(MUSLSRC)/math/log10.c
SOURCES += $(MUSLSRC)/math/log10f.c
SOURCES += $(MUSLSRC)/math/log10l.c
SOURCES += $(MUSLSRC)/math/log1p.c
SOURCES += $(MUSLSRC)/math/log1pf.c
SOURCES += $(MUSLSRC)/math/log1pl.c
SOURCES += $(MUSLSRC)/math/log2.c
SOURCES += $(MUSLSRC)/math/log2f.c
SOURCES += $(MUSLSRC)/math/log2l.c
SOURCES += $(MUSLSRC)/math/logb.c
SOURCES += $(MUSLSRC)/math/logbf.c
SOURCES += $(MUSLSRC)/math/logbl.c
SOURCES += $(MUSLSRC)/math/log.c
SOURCES += $(MUSLSRC)/math/logf.c
SOURCES += $(MUSLSRC)/math/logl.c
SOURCES += $(MUSLSRC)/math/lrint.c
SOURCES += $(MUSLSRC)/math/lrintf.c
SOURCES += $(MUSLSRC)/math/lrintl.c
SOURCES += $(MUSLSRC)/math/lround.c
SOURCES += $(MUSLSRC)/math/lroundf.c
SOURCES += $(MUSLSRC)/math/lroundl.c
SOURCES += $(MUSLSRC)/math/modf.c
SOURCES += $(MUSLSRC)/math/modff.c
SOURCES += $(MUSLSRC)/math/modfl.c
SOURCES += $(MUSLSRC)/math/nan.c
SOURCES += $(MUSLSRC)/math/nanf.c
SOURCES += $(MUSLSRC)/math/nanl.c
SOURCES += $(MUSLSRC)/math/nearbyint.c
SOURCES += $(MUSLSRC)/math/nearbyintf.c
SOURCES += $(MUSLSRC)/math/nearbyintl.c
SOURCES += $(MUSLSRC)/math/nextafter.c
SOURCES += $(MUSLSRC)/math/nextafterf.c
SOURCES += $(MUSLSRC)/math/nextafterl.c
SOURCES += $(MUSLSRC)/math/nexttoward.c
SOURCES += $(MUSLSRC)/math/nexttowardf.c
SOURCES += $(MUSLSRC)/math/nexttowardl.c
SOURCES += $(MUSLSRC)/math/__polevll.c
SOURCES += $(MUSLSRC)/math/pow.c
SOURCES += $(MUSLSRC)/math/powf.c
SOURCES += $(MUSLSRC)/math/powl.c
SOURCES += $(MUSLSRC)/math/remainder.c
SOURCES += $(MUSLSRC)/math/remainderf.c
SOURCES += $(MUSLSRC)/math/remainderl.c
SOURCES += $(MUSLSRC)/math/__rem_pio2.c
SOURCES += $(MUSLSRC)/math/__rem_pio2f.c
SOURCES += $(MUSLSRC)/math/__rem_pio2_large.c
SOURCES += $(MUSLSRC)/math/__rem_pio2l.c
SOURCES += $(MUSLSRC)/math/remquo.c
SOURCES += $(MUSLSRC)/math/remquof.c
SOURCES += $(MUSLSRC)/math/remquol.c
SOURCES += $(MUSLSRC)/math/rint.c
SOURCES += $(MUSLSRC)/math/rintf.c
SOURCES += $(MUSLSRC)/math/rintl.c
SOURCES += $(MUSLSRC)/math/round.c
SOURCES += $(MUSLSRC)/math/roundf.c
SOURCES += $(MUSLSRC)/math/roundl.c
SOURCES += $(MUSLSRC)/math/scalb.c
SOURCES += $(MUSLSRC)/math/scalbf.c
SOURCES += $(MUSLSRC)/math/scalbln.c
SOURCES += $(MUSLSRC)/math/scalblnf.c
SOURCES += $(MUSLSRC)/math/scalblnl.c
SOURCES += $(MUSLSRC)/math/scalbn.c
SOURCES += $(MUSLSRC)/math/scalbnf.c
SOURCES += $(MUSLSRC)/math/scalbnl.c
SOURCES += $(MUSLSRC)/math/__signbit.c
SOURCES += $(MUSLSRC)/math/__signbitf.c
SOURCES += $(MUSLSRC)/math/__signbitl.c
SOURCES += $(MUSLSRC)/math/signgam.c
SOURCES += $(MUSLSRC)/math/significand.c
SOURCES += $(MUSLSRC)/math/significandf.c
SOURCES += $(MUSLSRC)/math/__sin.c
SOURCES += $(MUSLSRC)/math/sin.c
SOURCES += $(MUSLSRC)/math/sincos.c
SOURCES += $(MUSLSRC)/math/sincosf.c
SOURCES += $(MUSLSRC)/math/sincosl.c
SOURCES += $(MUSLSRC)/math/__sindf.c
SOURCES += $(MUSLSRC)/math/sinf.c
SOURCES += $(MUSLSRC)/math/sinh.c
SOURCES += $(MUSLSRC)/math/sinhf.c
SOURCES += $(MUSLSRC)/math/sinhl.c
SOURCES += $(MUSLSRC)/math/__sinl.c
SOURCES += $(MUSLSRC)/math/sinl.c
SOURCES += $(MUSLSRC)/math/sqrt.c
SOURCES += $(MUSLSRC)/math/sqrtf.c
SOURCES += $(MUSLSRC)/math/sqrtl.c
SOURCES += $(MUSLSRC)/math/__tan.c
SOURCES += $(MUSLSRC)/math/tan.c
SOURCES += $(MUSLSRC)/math/__tandf.c
SOURCES += $(MUSLSRC)/math/tanf.c
SOURCES += $(MUSLSRC)/math/tanh.c
SOURCES += $(MUSLSRC)/math/tanhf.c
SOURCES += $(MUSLSRC)/math/tanhl.c
SOURCES += $(MUSLSRC)/math/__tanl.c
SOURCES += $(MUSLSRC)/math/tanl.c
SOURCES += $(MUSLSRC)/math/tgamma.c
SOURCES += $(MUSLSRC)/math/tgammaf.c
SOURCES += $(MUSLSRC)/math/tgammal.c
SOURCES += $(MUSLSRC)/math/trunc.c
SOURCES += $(MUSLSRC)/math/truncf.c
SOURCES += $(MUSLSRC)/math/truncl.c

SOURCES += $(MUSLSRC)/fenv/fegetexceptflag.c
SOURCES += $(MUSLSRC)/fenv/feholdexcept.c
SOURCES += $(MUSLSRC)/fenv/fenv.c
SOURCES += $(MUSLSRC)/fenv/fesetexceptflag.c
SOURCES += $(MUSLSRC)/fenv/fesetround.c
SOURCES += $(MUSLSRC)/fenv/feupdateenv.c
SOURCES += $(MUSLSRC)/fenv/__flt_rounds.c

SOURCES += $(MUSLSRC)/internal/floatscan.c
SOURCES += $(MUSLSRC)/internal/intscan.c
SOURCES += $(MUSLSRC)/internal/libc.c
SOURCES += $(MUSLSRC)/internal/shgetc.c

SOURCES += $(MUSLSRC)/complex/cabs.c
SOURCES += $(MUSLSRC)/complex/cabsf.c
SOURCES += $(MUSLSRC)/complex/cabsl.c
SOURCES += $(MUSLSRC)/complex/cacos.c
SOURCES += $(MUSLSRC)/complex/cacosf.c
SOURCES += $(MUSLSRC)/complex/cacosh.c
SOURCES += $(MUSLSRC)/complex/cacoshf.c
SOURCES += $(MUSLSRC)/complex/cacoshl.c
SOURCES += $(MUSLSRC)/complex/cacosl.c
SOURCES += $(MUSLSRC)/complex/carg.c
SOURCES += $(MUSLSRC)/complex/cargf.c
SOURCES += $(MUSLSRC)/complex/cargl.c
SOURCES += $(MUSLSRC)/complex/casin.c
SOURCES += $(MUSLSRC)/complex/casinf.c
SOURCES += $(MUSLSRC)/complex/casinh.c
SOURCES += $(MUSLSRC)/complex/casinhf.c
SOURCES += $(MUSLSRC)/complex/casinhl.c
SOURCES += $(MUSLSRC)/complex/casinl.c
SOURCES += $(MUSLSRC)/complex/catan.c
SOURCES += $(MUSLSRC)/complex/catanf.c
SOURCES += $(MUSLSRC)/complex/catanh.c
SOURCES += $(MUSLSRC)/complex/catanhf.c
SOURCES += $(MUSLSRC)/complex/catanhl.c
SOURCES += $(MUSLSRC)/complex/catanl.c
SOURCES += $(MUSLSRC)/complex/ccos.c
SOURCES += $(MUSLSRC)/complex/ccosf.c
SOURCES += $(MUSLSRC)/complex/ccosh.c
SOURCES += $(MUSLSRC)/complex/ccoshf.c
SOURCES += $(MUSLSRC)/complex/ccoshl.c
SOURCES += $(MUSLSRC)/complex/ccosl.c
SOURCES += $(MUSLSRC)/complex/__cexp.c
SOURCES += $(MUSLSRC)/complex/cexp.c
SOURCES += $(MUSLSRC)/complex/__cexpf.c
SOURCES += $(MUSLSRC)/complex/cexpf.c
SOURCES += $(MUSLSRC)/complex/cexpl.c
SOURCES += $(MUSLSRC)/complex/cimag.c
SOURCES += $(MUSLSRC)/complex/cimagf.c
SOURCES += $(MUSLSRC)/complex/cimagl.c
SOURCES += $(MUSLSRC)/complex/clog.c
SOURCES += $(MUSLSRC)/complex/clogf.c
SOURCES += $(MUSLSRC)/complex/clogl.c
SOURCES += $(MUSLSRC)/complex/conj.c
SOURCES += $(MUSLSRC)/complex/conjf.c
SOURCES += $(MUSLSRC)/complex/conjl.c
#SOURCES += $(MUSLSRC)/complex/cpow.c
#SOURCES += $(MUSLSRC)/complex/cpowf.c
#SOURCES += $(MUSLSRC)/complex/cpowl.c
SOURCES += $(MUSLSRC)/complex/cproj.c
SOURCES += $(MUSLSRC)/complex/cprojf.c
SOURCES += $(MUSLSRC)/complex/cprojl.c
SOURCES += $(MUSLSRC)/complex/creal.c
SOURCES += $(MUSLSRC)/complex/crealf.c
SOURCES += $(MUSLSRC)/complex/creall.c
SOURCES += $(MUSLSRC)/complex/csin.c
SOURCES += $(MUSLSRC)/complex/csinf.c
SOURCES += $(MUSLSRC)/complex/csinh.c
SOURCES += $(MUSLSRC)/complex/csinhf.c
SOURCES += $(MUSLSRC)/complex/csinhl.c
SOURCES += $(MUSLSRC)/complex/csinl.c
SOURCES += $(MUSLSRC)/complex/csqrt.c
SOURCES += $(MUSLSRC)/complex/csqrtf.c
SOURCES += $(MUSLSRC)/complex/csqrtl.c
SOURCES += $(MUSLSRC)/complex/ctan.c
SOURCES += $(MUSLSRC)/complex/ctanf.c
SOURCES += $(MUSLSRC)/complex/ctanh.c
SOURCES += $(MUSLSRC)/complex/ctanhf.c
SOURCES += $(MUSLSRC)/complex/ctanhl.c
SOURCES += $(MUSLSRC)/complex/ctanl.c
SOURCES += $(MUSLSRC)/misc/basename.c
SOURCES += $(MUSLSRC)/misc/dirname.c

SOURCES += $(MUSLSRC)/search/lsearch.c
SOURCES += $(MUSLSRC)/search/hsearch.c

SOURCES += $(MUSLSRC)/legacy/getpagesize.c

SOURCES += $(MUSLSRC)/prng/rand.c
SOURCES += $(MUSLSRC)/prng/lrand48.c
SOURCES += $(MUSLSRC)/prng/__seed48.c
SOURCES += $(MUSLSRC)/prng/__rand48_step.c

SOURCES += $(MUSLSRC)/regex/fnmatch.c

SOURCES += $(MUSLSRC)/search/tsearch_avl.c
SOURCES += $(MUSLSRC)/search/insque.c

SOURCES += $(MUSLSRC)/env/getenv.c
SOURCES += $(MUSLSRC)/env/setenv.c
SOURCES += $(MUSLSRC)/env/putenv.c
SOURCES += $(MUSLSRC)/env/clearenv.c
SOURCES += $(MUSLSRC)/env/unsetenv.c
SOURCES += $(MUSLSRC)/env/__environ.c

#SOURCES += $(MUSLSRC)/time/mktime.c
#SOURCES += $(MUSLSRC)/time/gmtime.c
#SOURCES += $(MUSLSRC)/time/__tm_to_secs.c
#SOURCES += $(MUSLSRC)/time/__year_to_secs.c
#SOURCES += $(MUSLSRC)/time/__month_to_secs.c
#SOURCES += $(MUSLSRC)/time/__tz.c

SOURCES += $(MUSLSRC)/crypt/crypt.c
SOURCES += $(MUSLSRC)/crypt/crypt_r.c
SOURCES += $(MUSLSRC)/crypt/crypt_sha256.c
SOURCES += $(MUSLSRC)/crypt/crypt_sha512.c
SOURCES += $(MUSLSRC)/crypt/crypt_des.c
SOURCES += $(MUSLSRC)/crypt/crypt_md5.c
SOURCES += $(MUSLSRC)/crypt/crypt_blowfish.c
SOURCES += $(MUSLSRC)/crypt/encrypt.c

OBJECTS = $(SOURCES:.c=.o)
OBJECTS += abort.o setjmp.o longjmp.o

$(ARCHIVE): $(OBJECTS)
	ar r $(ARCHIVE) $(OBJECTS)

%.o: %.c
	$(CC) -c $(DEFINES) $(CFLAGS) $(DEFINES) $(INCLUDES) -o $@ $<

abort.o: abort.S
	$(CC) -c $(CFLAGS) $(DEFINES) $(INCLUDES) -o abort.o abort.S

clean:
	rm -f $(ARCHIVE) $(OBJECTS) .depends

setjmp.o:
	gcc -c -o setjmp.o $(MUSLSRC)/setjmp/x86_64/setjmp.s

longjmp.o:
	gcc -c -o longjmp.o $(MUSLSRC)/setjmp/x86_64/longjmp.s

#include $(MAKDIR)/depend.mak
#-include .depends

depend:
