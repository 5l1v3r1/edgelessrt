include ../../mak/defs.mak

##==============================================================================
##
## program:
##
##==============================================================================

PROGRAM = typeinfo

INCLUDES += -I$(INCDIR)

SOURCES = typeinfo_u.c main.cpp

LIBRARIES += $(LIBDIR)/host/liboehost.a -ldl -lpthread

LDFLAGS += $(SGXAPP_LDFLAGS)

all:
	$(MAKE) gen
	$(MAKE) program

include $(TOP)/mak/program.mak

##==============================================================================
##
## tests:
##
##==============================================================================

GENUNTRUSTED=1
GENIDL=typeinfo.idl
GENHDR=typeinfo_u.h
GENSRC=typeinfo_u.c

include $(TOP)/mak/gen.mak

##==============================================================================
##
## tests:
##
##==============================================================================

tests:
	@ ./typeinfo

##==============================================================================
##
## mc:
##
##==============================================================================

mc:
	$(MEMCHECK) ./typeinfo

##==============================================================================
##
## gen:
##
##==============================================================================

gen:
	$(BINDIR)/oegen -u typeinfo.idl
